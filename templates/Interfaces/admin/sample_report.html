<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        *{
            padding: 0;
            margin: 0;
            font-family: 'Times New Roman', Times, serif;
        }
        .top-bar{
            border: 1px solid black;
            height: 15vh;
            background-color: white;
            
        }
        .topic{
            text-align: center;
            font-family: 'Times New Roman', Times, serif;
            font-weight: bold;
            color: steelblue;
        }
        body{
            background: lightyellow;
        }
        fieldset{
            margin-left: 05rem;
        }
        legend{
            font-weight: bold;
            
        }
        .year{
            color: red;
        }
        
    </style>

</head>
<body>
    <div class="top-bar">
        <div class="topic">
            <h4>Medical Authentication System</h4>
        <h5>Reports</h5>
     </div>
    </div>
    <fieldset >
            <legend>Genaral Information For:{{year}} 
                <form action="/adminReports" method="get">
                    {{form.hidden_tag()}}
                    {{form.date}}
                    {{form.departments()}}
                    {{form.update()}}
                </form>

            </legend>
            
        <div class="card w-75" >
            <div class="card-header fs-5 fw-bolder">
                Registrations
              </div>
              
            <div class="card-body">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Total Students</th>
                        <th scope="col">Total Count Of Medicals</th>
                        <th scope="col">Total Departments</th>
                        <th scope="col">Confirmed Medicals</th>
                        <th scope="col">Un Confirmed Medicals</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>{{reg_count}}</td>
                        <td>{{med_count}}</td>
                        <td>{{admin_count}}</td>
                        <td>{{confirmed}}</td>
                        <td>{{unconfirmed}}</td>
                        
                      </tr>
                      
                    </tbody>
                  </table>
              
            </div>
        </div>
        <hr>
        <div class="card ">
            <div class="card-header fs-5 fw-bolder">
              <div style="color: blue;">{{department}}</div>
            </div>

            <div class="card-body ">


              
              <div class="card">
                <h5 class="card-header">Featured</h5>
                <div class="card-body">
                  <h5 class="card-title">Special title treatment</h5>
                  <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                  <a href="#" class="btn btn-primary">Go somewhere</a>
                </div>
              </div>



                <!-- cleaned_dep -->
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Index Number</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Held Date</th>
                        <th scope="col">Exam Location</th>
                        <th scope="col">Subject</th>
                        <th scope="col">Year</th>
                        <th scope="col">Semester</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                    {% for row in cleaned_data %}
                        <tr>
                          <td>{{row[0]}}</td>
                          <td>{{row[1]}}</td>
                          <td>{{row[2]}}</td>
                          <td>{{row[3]}}</td>
                          <td>{{row[4]}}</td>
                          <td>{{row[5]}}</td>
                          <td>{{row[6]}}</td>
                          <td>{{row[7]}}</td>
                          
                          
                        </tr>
                      
                    {% endfor %}
                    </tbody>
                  </table>
            </div>
        </div>
        

          

    </fieldset>
    
    <script>
      $(document).ready(function(){
          $('button').click(function(){
              var dep = $('#dep').val(); // Corrected the selector to use # for ID
              $.get('/adminReports', { dep: dep }, function(data) {
                  console.log(data);
              });
          });
      });
  </script>
</body>
</html>